{"version":3,"file":"flicking.esm.js","sources":["../src/react-flicking/utils.ts","../src/react-flicking/index.tsx"],"sourcesContent":["export function hasClass(element: HTMLElement, className: string) {\n  if (element.classList) {\n    return element.classList.contains(className);\n  }\n  return !!element.className.match(new RegExp(`(\\\\s|^)${className}(\\\\s|$)`));\n}\n\nexport function addClass(element: HTMLElement, className: string) {\n  if (element.classList) {\n    element.classList.add(className); \n  } else {\n    element.className += ` ${className}`;\n  }\n  return true;\n}","import NativeFlicking from \"@egjs/flicking\";\nimport { HTMLAttributes } from 'react';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { addClass, hasClass } from './utils';\n\nexport interface IFlickingOptions {\n  hwAccelerable?: boolean;\n  prefix?: string;\n  deceleration?: number;\n  horizontal?: boolean;\n  circular?: boolean;\n  previewPadding?: number | string | Array<number | string>;\n  bounce?: number | number[];\n  threshold?: number;\n  duration?: number;\n  panelEffect?: (x: number) => number;\n  defaultIndex?: number,\n  inputType?: string[],\n  thresholdAngle?: number;\n  adaptiveHeight?: boolean;\n  zIndex?: number;\n  useTranslate?: boolean;\n}\nexport const DIRECTION_LEFT: number = (NativeFlicking as any).DIRECTION_LEFT;\nexport const DIRECTION_RIGHT: number = (NativeFlicking as any).DIRECTION_RIGHT;\nexport const DIRECTION_TOP: number = (NativeFlicking as any).DIRECTION_TOP;\nexport const DIRECTION_BOTTOM: number = (NativeFlicking as any).DIRECTION_BOTTOM;\n\nexport interface IFlickingProps extends IFlickingOptions, HTMLAttributes<HTMLElement> {\n  onFlick?: (e?: any) => void;\n  onFlickEnd?: (e?: any) => void;\n  onBeforeFlickStart?: (e?: any) => void;\n  onBeforeRestore?: (e?: any) => void;\n  onRestore?: (e?: any) => void;\n  tag?: string;\n}\n\n\nconst flickingOptions: Array<keyof IFlickingOptions> = [\"hwAccelerable\", \"prefix\", \"deceleration\",\n  \"horizontal\", \"circular\", \"previewPadding\", \"bounce\", \"threshold\", \"duration\", \"panelEffect\", \"defaultIndex\", \"inputType\",\n  \"thresholdAngle\", \"adaptiveHeight\", \"zIndex\", \"useTranslate\"];\n\nexport default class Flicking extends React.Component<IFlickingProps> {\n  public static defaultProps: IFlickingProps = {\n    horizontal: true,\n    onBeforeFlickStart: (e?: any) => { return; },\n    onBeforeRestore: (e?: any) => { return; },\n    onFlick: (e?: any) => { return; },\n    onFlickEnd: (e?: any) => { return; },\n    onRestore: (e?: any) => { return; },\n    prefix: \"eg-flick\",\n    tag: \"div\",\n  };\n  private flicking: NativeFlicking;\n  public render() {\n    const props = this.props;\n    const defaultProps = Flicking.defaultProps;\n    const Tag = props.tag as  keyof JSX.IntrinsicElements;\n    const attributes = {};\n\n    for (const name in props) {\n      if (name in defaultProps || flickingOptions.indexOf(name as keyof IFlickingOptions) !== -1) {\n        continue;\n      }\n      attributes[name] = props[name];\n    }\n\n    return <Tag {...attributes}>\n      <div className={`${this.props.prefix}-container`}>\n        {this.props.children}\n      </div>\n    </Tag>;\n  }\n  public componentDidUpdate() {\n    const flicking = (this.flicking as any);\n    const panel = flicking._conf.panel;\n    const horizontal = this.props.horizontal;\n    const className = `${this.props.prefix}-panel`;\n    panel.$list = Array.prototype.slice.call(flicking.$container.children);\n    panel.count = panel.$list.length;\n    panel.origCount = panel.count;\n\n    if (this.props.circular) {\n      flicking._arrangePanels();\n      flicking._movePanelPosition(panel.no - panel.index, true);\n    }\n    panel.$list.forEach((el: HTMLElement) => {\n      if (hasClass(el, className)) {\n        return;\n      }\n      addClass(el, className);\n      el.style.cssText += `position:absolute;box-sizing:border-box;${horizontal ? \"height\" : \"size\"}: 100%;top:0;left:0;`;\n    });\n\n    flicking._applyPanelsPos();\n    this.resize();\n  }\n  public componentDidMount() {\n    const options = {};\n    const props = this.props;\n\n    for (const name in props) {\n      if (flickingOptions.indexOf(name as keyof IFlickingOptions) !== -1) {\n        options[name] = props[name];\n      }\n    }\n\n    this.flicking = new NativeFlicking(ReactDOM.findDOMNode(this) as HTMLElement, options);\n\n    const flicking = this.flicking;\n\n    flicking.on(\"flick\", (e) => {\n      this.props.onFlick(e);\n    });\n    flicking.on(\"flickEnd\", (e) => {\n      this.props.onFlickEnd(e);\n    });\n    flicking.on(\"beforeFlickStart\", (e) => {\n      this.props.onBeforeFlickStart(e);\n    });\n    flicking.on(\"beforeRestore\", (e) => {\n      this.props.onBeforeRestore(e);\n    });\n    flicking.on(\"restore\", (e) => {\n      this.props.onRestore(e);\n    });\n\n    window.addEventListener(\"resize\", this.resize);\n  }\n  public moveTo(no: number, duration?: number) {\n    this.flicking.moveTo(no, duration);\n    return this;\n  }\n  public next(duration?: number) {\n    this.flicking.next(duration);\n    return this;\n  }\n  public prev(duration?: number) {\n    this.flicking.prev(duration);\n    return this;\n  }\n  public getAllElements() {\n    return this.flicking.getAllElements();\n  }\n  public getElement() {\n    return this.flicking.getElement();\n  }\n  public getNextElement() {\n    return this.flicking.getNextElement();\n  }\n  public getPrevElement() {\n    return this.flicking.getPrevElement();\n  }\n  public getIndex(physical: boolean) {\n    return this.flicking.getIndex(physical);\n  }\n  public getNextIndex(physical: boolean) {\n    return this.flicking.getNextIndex(physical);\n  }\n  public getPrevIndex(physical: boolean) {\n    return this.flicking.getPrevIndex(physical);\n  }\n  public plugin(plugins: any[]) {\n    (this.flicking as any).plugin(plugins);\n    return this;\n  }\n  public resize = () => {\n    this.flicking.resize();\n    (this.flicking as any).plugins.forEach((plugin: any) => {\n      if (plugin.resize) {\n        plugin.resize();\n      }\n    });\n    return this;\n  }\n  public componentWillUnmount() {\n    this.flicking.destroy();\n    window.removeEventListener(\"resize\", this.resize);\n  }\n}\n"],"names":["hasClass","element","className","classList","contains","match","RegExp","addClass","add","DIRECTION_LEFT","NativeFlicking","DIRECTION_RIGHT","DIRECTION_TOP","DIRECTION_BOTTOM","flickingOptions","tslib_1","_this","flicking","resize","plugins","forEach","plugin","props","defaultProps","Flicking","Tag","tag","attributes","name","indexOf","React","prefix","children","panel","_conf","horizontal","$list","Array","prototype","slice","call","$container","count","length","origCount","circular","_arrangePanels","_movePanelPosition","no","index","el","style","cssText","_applyPanelsPos","options","ReactDOM","on","e","onFlick","onFlickEnd","onBeforeFlickStart","onBeforeRestore","onRestore","window","addEventListener","duration","moveTo","next","prev","getAllElements","getElement","getNextElement","getPrevElement","physical","getIndex","getNextIndex","getPrevIndex","destroy","removeEventListener"],"mappings":"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"}